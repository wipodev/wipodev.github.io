---
import Layout from '../layouts/Layout.astro';
import ModsSection from "../components/FeaturedModsSection.astro";
import { useTranslations } from '../i18n/utils';
import { defaultLang } from "../i18n/ui";

const locale = Astro.currentLocale || defaultLang;
const t = useTranslations(locale);
---

<Layout title={t('title')} navbarVariant="home">
  <ModsSection title={t('modsSection.title')} />
</Layout>

<script is:inline>
  const navbar = document.querySelector('.navbar');
  const modsSection = document.querySelector('#mods-cards');
  function handleScroll() {
    if (!navbar || !modsSection) return;

    const trigger = modsSection.offsetTop - 68;
    if (window.scrollY >= trigger) {
      navbar.classList.add('scrolled');
    } else {
      navbar.classList.remove('scrolled');
    }
  }
  window.addEventListener('scroll', handleScroll);
  handleScroll();
</script>